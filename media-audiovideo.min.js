(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'})}Object.defineProperty(exports,'__esModule',{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if((mode&4)&&typeof value==='object'&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,'default',{enumerable:true,value:value});if(mode&2&&typeof value!='string')for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default']}:function getModuleExports(){return module};__webpack_require__.d(getter,'a',getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=0)})([(function(module,exports,__webpack_require__){var media=wp.media,baseSettings=window._wpmejsSettings||{},l10n=window._wpMediaViewsL10n||{};wp.media.mixin={mejsSettings:baseSettings,removeAllPlayers:function(){var p;if(window.mejs&&window.mejs.players){for(p in window.mejs.players){window.mejs.players[p].pause();this.removePlayer(window.mejs.players[p])}}},removePlayer:function(t){var featureIndex,feature;if(!t.options){return}for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t['clean'+feature]){try{t['clean'+feature](t)}catch(e){}}}if(!t.isDynamic){t.node.remove()}if('html5'!==t.media.rendererName){t.media.remove()}delete window.mejs.players[t.id];t.container.remove();t.globalUnbind('resize',t.globalResizeCallback);t.globalUnbind('keydown',t.globalKeydownCallback);t.globalUnbind('click',t.globalClickCallback);delete t.media.player},unsetPlayers:function(){if(this.players&&this.players.length){_.each(this.players,function(player){player.pause();wp.media.mixin.removePlayer(player)});this.players=[]}}};wp.media.playlist=new wp.media.collection({tag:'playlist',editTitle:l10n.editPlaylistTitle,defaults:{id:wp.media.view.settings.post.id,style:'light',tracklist:true,tracknumbers:true,images:true,artists:true,type:'audio'}});wp.media.audio={coerce:wp.media.coerce,defaults:{id:wp.media.view.settings.post.id,src:'',loop:false,autoplay:false,preload:'none',width:400},edit:function(data){var frame,shortcode=wp.shortcode.next('audio',data).shortcode;frame=wp.media({frame:'audio',state:'audio-details',metadata:_.defaults(shortcode.attrs.named,this.defaults)});return frame},shortcode:function(model){var content;_.each(this.defaults,function(value,key){model[key]=this.coerce(model,key);if(value===model[key]){delete model[key]}},this);content=model.content;delete model.content;return new wp.shortcode({tag:'audio',attrs:model,content:content})}};wp.media.video={coerce:wp.media.coerce,defaults:{id:wp.media.view.settings.post.id,src:'',poster:'',loop:false,autoplay:false,preload:'metadata',content:'',width:640,height:360},edit:function(data){var frame,shortcode=wp.shortcode.next('video',data).shortcode,attrs;attrs=shortcode.attrs.named;attrs.content=shortcode.content;frame=wp.media({frame:'video',state:'video-details',metadata:_.defaults(attrs,this.defaults)});return frame},shortcode:function(model){var content;_.each(this.defaults,function(value,key){model[key]=this.coerce(model,key);if(value===model[key]){delete model[key]}},this);content=model.content;delete model.content;return new wp.shortcode({tag:'video',attrs:model,content:content})}};media.model.PostMedia=__webpack_require__(1);media.controller.AudioDetails=__webpack_require__(2);media.controller.VideoDetails=__webpack_require__(3);media.view.MediaFrame.MediaDetails=__webpack_require__(4);media.view.MediaFrame.AudioDetails=__webpack_require__(5);media.view.MediaFrame.VideoDetails=__webpack_require__(6);media.view.MediaDetails=__webpack_require__(7);media.view.AudioDetails=__webpack_require__(8);media.view.VideoDetails=__webpack_require__(9)}),(function(module,exports){var PostMedia=Backbone.Model.extend({initialize:function(){this.attachment=false},setSource:function(attachment){this.attachment=attachment;this.extension=attachment.get('filename').split('.').pop();if(this.get('src')&&this.extension===this.get('src').split('.').pop()){this.unset('src')}if(_.contains(wp.media.view.settings.embedExts,this.extension)){this.set(this.extension,this.attachment.get('url'))}else{this.unset(this.extension)}},changeAttachment:function(attachment){this.setSource(attachment);this.unset('src');_.each(_.without(wp.media.view.settings.embedExts,this.extension),function(ext){this.unset(ext)},this)}});module.exports=PostMedia}),(function(module,exports){var State=wp.media.controller.State,l10n=wp.media.view.l10n,AudioDetails;AudioDetails=State.extend({defaults:{id:'audio-details',toolbar:'audio-details',title:l10n.audioDetailsTitle,content:'audio-details',menu:'audio-details',router:false,priority:60},initialize:function(options){this.media=options.media;State.prototype.initialize.apply(this,arguments)}});module.exports=AudioDetails}),(function(module,exports){var State=wp.media.controller.State,l10n=wp.media.view.l10n,VideoDetails;VideoDetails=State.extend({defaults:{id:'video-details',toolbar:'video-details',title:l10n.videoDetailsTitle,content:'video-details',menu:'video-details',router:false,priority:60},initialize:function(options){this.media=options.media;State.prototype.initialize.apply(this,arguments)}});module.exports=VideoDetails}),(function(module,exports){var Select=wp.media.view.MediaFrame.Select,l10n=wp.media.view.l10n,MediaDetails;MediaDetails=Select.extend({defaults:{id:'media',url:'',menu:'media-details',content:'media-details',toolbar:'media-details',type:'link',priority:120},initialize:function(options){this.DetailsView=options.DetailsView;this.cancelText=options.cancelText;this.addText=options.addText;this.media=new wp.media.model.PostMedia(options.metadata);this.options.selection=new wp.media.model.Selection(this.media.attachment,{multiple:false});Select.prototype.initialize.apply(this,arguments)},bindHandlers:function(){var menu=this.defaults.menu;Select.prototype.bindHandlers.apply(this,arguments);this.on('menu:create:'+menu,this.createMenu,this);this.on('content:render:'+menu,this.renderDetailsContent,this);this.on('menu:render:'+menu,this.renderMenu,this);this.on('toolbar:render:'+menu,this.renderDetailsToolbar,this)},renderDetailsContent:function(){var view=new this.DetailsView({controller:this,model:this.state().media,attachment:this.state().media.attachment}).render();this.content.set(view)},renderMenu:function(view){var lastState=this.lastState(),previous=lastState&&lastState.id,frame=this;view.set({cancel:{text:this.cancelText,priority:20,click:function(){if(previous){frame.setState(previous)}else{frame.close()}}},separateCancel:new wp.media.View({className:'separator',priority:40})})},setPrimaryButton:function(text,handler){this.toolbar.set(new wp.media.view.Toolbar({controller:this,items:{button:{style:'primary',text:text,priority:80,click:function(){var controller=this.controller;handler.call(this,controller,controller.state());controller.setState(controller.options.state);controller.reset()}}}}))},renderDetailsToolbar:function(){this.setPrimaryButton(l10n.update,function(controller,state){controller.close();state.trigger('update',controller.media.toJSON())})},renderReplaceToolbar:function(){this.setPrimaryButton(l10n.replace,function(controller,state){var attachment=state.get('selection').single();controller.media.changeAttachment(attachment);state.trigger('replace',controller.media.toJSON())})},renderAddSourceToolbar:function(){this.setPrimaryButton(this.addText,function(controller,state){var attachment=state.get('selection').single();controller.media.setSource(attachment);state.trigger('add-source',controller.media.toJSON())})}});module.exports=MediaDetails}),(function(module,exports){var MediaDetails=wp.media.view.MediaFrame.MediaDetails,MediaLibrary=wp.media.controller.MediaLibrary,l10n=wp.media.view.l10n,AudioDetails;AudioDetails=MediaDetails.extend({defaults:{id:'audio',url:'',menu:'audio-details',content:'audio-details',toolbar:'audio-details',type:'link',title:l10n.audioDetailsTitle,priority:120},initialize:function(options){options.DetailsView=wp.media.view.AudioDetails;options.cancelText=l10n.audioDetailsCancel;options.addText=l10n.audioAddSourceTitle;MediaDetails.prototype.initialize.call(this,options)},bindHandlers:function(){MediaDetails.prototype.bindHandlers.apply(this,arguments);this.on('toolbar:render:replace-audio',this.renderReplaceToolbar,this);this.on('toolbar:render:add-audio-source',this.renderAddSourceToolbar,this)},createStates:function(){this.states.add([new wp.media.controller.AudioDetails({media:this.media}),new MediaLibrary({type:'audio',id:'replace-audio',title:l10n.audioReplaceTitle,toolbar:'replace-audio',media:this.media,menu:'audio-details'}),new MediaLibrary({type:'audio',id:'add-audio-source',title:l10n.audioAddSourceTitle,toolbar:'add-audio-source',media:this.media,menu:false})])}});module.exports=AudioDetails}),(function(module,exports){var MediaDetails=wp.media.view.MediaFrame.MediaDetails,MediaLibrary=wp.media.controller.MediaLibrary,l10n=wp.media.view.l10n,VideoDetails;VideoDetails=MediaDetails.extend({defaults:{id:'video',url:'',menu:'video-details',content:'video-details',toolbar:'video-details',type:'link',title:l10n.videoDetailsTitle,priority:120},initialize:function(options){options.DetailsView=wp.media.view.VideoDetails;options.cancelText=l10n.videoDetailsCancel;options.addText=l10n.videoAddSourceTitle;MediaDetails.prototype.initialize.call(this,options)},bindHandlers:function(){MediaDetails.prototype.bindHandlers.apply(this,arguments);this.on('toolbar:render:replace-video',this.renderReplaceToolbar,this);this.on('toolbar:render:add-video-source',this.renderAddSourceToolbar,this);this.on('toolbar:render:select-poster-image',this.renderSelectPosterImageToolbar,this);this.on('toolbar:render:add-track',this.renderAddTrackToolbar,this)},createStates:function(){this.states.add([new wp.media.controller.VideoDetails({media:this.media}),new MediaLibrary({type:'video',id:'replace-video',title:l10n.videoReplaceTitle,toolbar:'replace-video',media:this.media,menu:'video-details'}),new MediaLibrary({type:'video',id:'add-video-source',title:l10n.videoAddSourceTitle,toolbar:'add-video-source',media:this.media,menu:false}),new MediaLibrary({type:'image',id:'select-poster-image',title:l10n.videoSelectPosterImageTitle,toolbar:'select-poster-image',media:this.media,menu:'video-details'}),new MediaLibrary({type:'text',id:'add-track',title:l10n.videoAddTrackTitle,toolbar:'add-track',media:this.media,menu:'video-details'})])},renderSelectPosterImageToolbar:function(){this.setPrimaryButton(l10n.videoSelectPosterImageTitle,function(controller,state){var urls=[],attachment=state.get('selection').single();controller.media.set('poster',attachment.get('url'));state.trigger('set-poster-image',controller.media.toJSON());_.each(wp.media.view.settings.embedExts,function(ext){if(controller.media.get(ext)){urls.push(controller.media.get(ext))}});wp.ajax.send('set-attachment-thumbnail',{data:{urls:urls,thumbnail_id:attachment.get('id')}})})},renderAddTrackToolbar:function(){this.setPrimaryButton(l10n.videoAddTrackTitle,function(controller,state){var attachment=state.get('selection').single(),content=controller.media.get('content');if(-1===content.indexOf(attachment.get('url'))){content+=['<track srclang="en" label="English" kind="subtitles" src="',attachment.get('url'),'" />'].join('');controller.media.set('content',content)}state.trigger('add-track',controller.media.toJSON())})}});module.exports=VideoDetails}),(function(module,exports){var AttachmentDisplay=wp.media.view.Settings.AttachmentDisplay,$=jQuery,MediaDetails;MediaDetails=AttachmentDisplay.extend({initialize:function(){_.bindAll(this,'success');this.players=[];this.listenTo(this.controller,'close',wp.media.mixin.unsetPlayers);this.on('ready',this.setPlayer);this.on('media:setting:remove',wp.media.mixin.unsetPlayers,this);this.on('media:setting:remove',this.render);this.on('media:setting:remove',this.setPlayer);AttachmentDisplay.prototype.initialize.apply(this,arguments)},events:function(){return _.extend({'click .remove-setting':'removeSetting','change .content-track':'setTracks','click .remove-track':'setTracks','click .add-media-source':'addSource'},AttachmentDisplay.prototype.events)},prepare:function(){return _.defaults({model:this.model.toJSON()},this.options)},removeSetting:function(e){var wrap=$(e.currentTarget).parent(),setting;setting=wrap.find('input').data('setting');if(setting){this.model.unset(setting);this.trigger('media:setting:remove',this)}wrap.remove()},setTracks:function(){var tracks='';_.each(this.$('.content-track'),function(track){tracks+=$(track).val()});this.model.set('content',tracks);this.trigger('media:setting:remove',this)},addSource:function(e){this.controller.lastMime=$(e.currentTarget).data('mime');this.controller.setState('add-'+this.controller.defaults.id+'-source')},loadPlayer:function(){this.players.push(new MediaElementPlayer(this.media,this.settings));this.scriptXhr=false},setPlayer:function(){var src;if(this.players.length||!this.media||this.scriptXhr){return}src=this.model.get('src');if(src&&src.indexOf('vimeo')>-1&&!('Vimeo'in window)){this.scriptXhr=$.getScript('https://player.vimeo.com/api/player.js',_.bind(this.loadPlayer,this))}else{this.loadPlayer()}},setMedia:function(){return this},success:function(mejs){var autoplay=mejs.attributes.autoplay&&'false'!==mejs.attributes.autoplay;if('flash'===mejs.pluginType&&autoplay){mejs.addEventListener('canplay',function(){mejs.play()},false)}this.mejs=mejs},render:function(){AttachmentDisplay.prototype.render.apply(this,arguments);setTimeout(_.bind(function(){this.resetFocus()},this),10);this.settings=_.defaults({success:this.success},wp.media.mixin.mejsSettings);return this.setMedia()},resetFocus:function(){this.$('.embed-media-settings').scrollTop(0)}},{instances:0,prepareSrc:function(elem){var i=MediaDetails.instances++;_.each($(elem).find('source'),function(source){source.src=[source.src,source.src.indexOf('?')>-1?'&':'?','_=',i].join('')});return elem}});module.exports=MediaDetails}),(function(module,exports){var MediaDetails=wp.media.view.MediaDetails,AudioDetails;AudioDetails=MediaDetails.extend({className:'audio-details',template:wp.template('audio-details'),setMedia:function(){var audio=this.$('.wp-audio-shortcode');if(audio.find('source').length){if(audio.is(':hidden')){audio.show()}this.media=MediaDetails.prepareSrc(audio.get(0))}else{audio.hide();this.media=false}return this}});module.exports=AudioDetails}),(function(module,exports){var MediaDetails=wp.media.view.MediaDetails,VideoDetails;VideoDetails=MediaDetails.extend({className:'video-details',template:wp.template('video-details'),setMedia:function(){var video=this.$('.wp-video-shortcode');if(video.find('source').length){if(video.is(':hidden')){video.show()}if(!video.hasClass('youtube-video')&&!video.hasClass('vimeo-video')){this.media=MediaDetails.prepareSrc(video.get(0))}else{this.media=video.get(0)}}else{video.hide();this.media=false}return this}});module.exports=VideoDetails})]);